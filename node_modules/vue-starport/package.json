{
  "name": "vue-starport",
  "version": "0.2.11",
  "packageManager": "pnpm@6.32.3",
  "description": "Shared Vue component across routes with animations",
  "keywords": [
    "vue",
    "animation",
    "transition"
  ],
  "homepage": "https://github.com/antfu/vue-starport#readme",
  "bugs": {
    "url": "https://github.com/antfu/vue-starport/issues"
  },
  "license": "MIT",
  "author": "Anthony Fu <anthonyfu117@hotmail.com>",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/antfu/vue-starport.git"
  },
  "funding": "https://github.com/sponsors/antfu",
  "main": "./dist/index.js",
  "module": "./dist/index.mjs",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "require": "./dist/index.js",
      "import": "./dist/index.mjs",
      "types": "./dist/index.d.ts"
    }
  },
  "files": [
    "dist"
  ],
  "dependencies": {
    "@vueuse/core": "^8.2.5",
    "vue": "^3.2.32"
  },
  "devDependencies": {
    "@antfu/eslint-config": "^0.20.2",
    "@antfu/ni": "^0.14.0",
    "@types/node": "^17.0.23",
    "bumpp": "^7.1.1",
    "cypress": "^9.5.4",
    "eslint": "^8.13.0",
    "nanoid": "^3.3.2",
    "pkgroll": "^1.0.3",
    "pnpm": "^6.32.6",
    "typescript": "^4.6.3",
    "vite": "^2.9.1",
    "vitest": "^0.9.3",
    "vue-router": "^4.0.14",
    "vue-tsc": "~0.34.6"
  },
  "scripts": {
    "build": "pkgroll",
    "dev": "pkgroll --watch",
    "play": "vite playground --open",
    "play:build": "vite build playground",
    "lint": "eslint .",
    "typecheck": "vue-tsc --noEmit",
    "test": "vitest",
    "test:e2e": "cypress open",
    "release": "bumpp --commit --tag --push && pnpm publish"
  },
  "readme": "<br>\n<br>\n<p align=\"center\">\n<img height=\"200\" src=\"./graphs/logo.png\" alt=\"Vue Starport\">\n</p>\n\n<p align=\"center\">\nShared Vue component across routes with animations\n</p>\n\n<p align=\"center\"><a href=\"https://www.npmjs.com/package/vue-starport\"><img src=\"https://img.shields.io/npm/v/vue-starport?color=3fb883&amp;label=\" alt=\"NPM version\"></a></p>\n\n<p align=\"center\"><a href=\"https://vue-starport.netlify.app/\">Live Demo</a></p>\n<p align=\"center\">English | <a href=\"./README.zh-Hans.md\">简体中文</a></p>\n\n<br>\n<br>\n\n## Why?\n\nIt's quite common you might have a same component used in different routes (pages) with a bit different sizes and positions. Sometimes you might want to animate them when user navigates between routes to provide a smooth UX. While such animation is common to be seen in native apps, it's could be a bit challenging to do it in Web.\n\nVue's component structure is presented as a **tree**, and the child components are in different branches with their own instances. Meaning when users navigate between routes, the components are not shared across routes.\n\n<p align=\"center\">\n<img src=\"./graphs/graph1.png\" width=\"400\" />\n</p>\n\nBy that means you can't directly animate the changes because they are in two different instances. The good news is, there is a technique called [FLIP](https://github.com/googlearchive/flipjs) to enumerate the transitions between them.\n\nHowever, FLIP only solves the problem of transitions, the components are still not the same. During the navigation, the internal state of the component will lost.\n\nThus I started this new approach **Starport** to experiment with a better solution to fit this requirement.\n\n## How?\n\nSo since we can't share the components across different branches in the component tree, we could actually hoist them to the root so they become independent from the routes.\n\nTo allow each page to still have control of the components, we introduced a **Proxy component** to present the expected size and position of that component. The proxy will pass the props and position information to the actual component and let it \"fly over\" the proxy with animations.\n\n<p align=\"center\">\n<img src=\"./graphs/graph2.png\" width=\"450\" />\n</p>\n\nWhen the transition ends and it arrived to the expected position, it will then \"land down\" to the actual component using the [`<Teleport/>`](https://vuejs.org/guide/built-ins/teleport.html) component.\n\n<p align=\"center\">\n<img src=\"./graphs/graph3.png\" width=\"400\" />\n</p>\n\nWith this \"landing\" mechanism, the DOM tree will be preserved as what you will have with the original tree structure. When navigating to another route, the component then will \"lift off\" back to the floating state, \"fly\" to the new proxy's position and \"land\" again.\n\nThis is very similar to [Terran's Buildings](https://starcraft.fandom.com/wiki/Lift_Off) in [StarCraft](https://starcraft2.com/) (able to leave the ground and fly to new locations). It's also the inspiration source of the project name [**Starport**](https://starcraft.fandom.com/wiki/Starport).\n\n<p align=\"center\">\n<img src=\"./graphs/starcraft-demo.png\" width=\"500\" />\n</p>\n\n## Install\n\n> ⚗️ **Experimental**\n\n```\nnpm i vue-starport\n```\n\n> Vue Starport only works for Vue 3\n\n## Usage\n\nAdd `<StarportCarrier>` component from `vue-starport` to your root component (`app.vue`). All `<Startport>` usage should be inside `<StarportCarrier>` component.\n\n```html\n<script setup>\nimport { StarportCarrier } from 'vue-starport'\n</script>\n\n<template>\n  <StarportCarrier> <!-- here -->\n    <RouterView />\n  </StarportCarrier>\n</template>\n```\n\nIn routes, wrap the component with the `<Starport>` component.\n\n```html\n<!-- PageA.vue -->\n<script setup>\nimport { Starport } from 'vue-starport'\n</script>\n\n<template>\n  <div>\n    <!-- ... -->\n    <Starport port=\"my-id\" style=\"height:400px\"> \n      <MyComponent :prop=\"value\"/>\n    </Starport>\n  </div>\n</template>\n```\n\nOn the other page, we do the same thing with **the same `port` id** to identify the instance.\n\n```html\n<!-- PageB.vue -->\n<script setup>\nimport { Starport } from 'vue-starport'\n</script>\n\n<template>\n  <div>\n    <!-- ... -->\n    <Starport port=\"my-id\" style=\"height:600px\">\n      <MyComponent :prop=\"value\"/>\n    </Starport>\n  </div>\n</template>\n```\n\n> Note that you might need to apply some styles to `<Starport>` to make it have a defined size indicating the area for the \"floating starcraft\" to land.\n\nCheckout the [Playground](./playground/) for more examples.\n\n### Register Components Globally\n\n```ts\n// main.ts\nimport StarportPlugin from 'vue-starport'\n\napp.use(StarportPlugin())\n```\n\nAnd then you can use `Starport` and `StarportCarrier` components without importing.\n\n### Keep Alive\n\nBy default, when navigating to a page without a corresponding `<Starport>` proxy to land, the component will be destroyed. If you want to keep the component alive even when it's not presented in the current route, you can set `keepAlive` to `true` for that specific instance.\n\n```html\n<Starport keep-alive port=\"my-id\">\n  <MyComponent />\n</Starport>\n```\n\nTo configure it globally, you can pass options to the plugin:\n\n```ts\n// main.ts\nimport StarportPlugin from 'vue-starport'\n\napp.use(StarportPlugin({ keepAlive: true }))\n```\n\n## Debug\n\nTo debug what happens during the transition, you can add the follow CSS to highlight the parts\n\n```css\n[data-starport-craft] {\n  background: #0805;\n}\n[data-starport-proxy]:not([data-starport-landed]) {\n  background: #8005;\n}\n```\n\n## Special Thanks\n\nThanks to [@hangsman](https://github.com/hangsman) who helped to provide the initial solution of proper teleport the element and made this idea valid. Also thanks to the viewers of [my live-streaming on Bilibili](https://space.bilibili.com/668380), those who spend time with me to working on this idea and provided useful feedback during the live.\n\nYou can check [the recordings of my live-streams (in Chinese)](https://www.bilibili.com/video/BV1na41147qR), where I wrote this project from scratch.\n\n你可以在哔哩哔哩观看我实现此项目的 [直播录像](https://www.bilibili.com/video/BV1na41147qR)。\n\n## Sponsors\n\n<p align=\"center\">\n  <a href=\"https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg\">\n    <img src='https://cdn.jsdelivr.net/gh/antfu/static/sponsors.svg'/>\n  </a>\n</p>\n\n## License\n\n[MIT](./LICENSE) License © 2022 [Anthony Fu](https://github.com/antfu)\n"
}